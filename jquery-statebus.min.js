!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=function(e,n){return n===undefined&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(n),n}:t(jQuery)}(function(i){var n={},f={},r=i({});function c(e){return e?JSON.parse(JSON.stringify(e)):{}}function d(e,n,t,o){"function"==typeof t&&(o=t,t=n,n=null),r.on((n?n+".":"")+t,function(){o(e.state,e.action)})}function a(e,n){r.trigger(e?e+"."+n:e)}i.statebus=i.extend(function(t,e){if("string"!=typeof t)throw new TypeError('Expected type of "string", but "'+typeof t+'".');var o=n[t]||(n[t]={}),r=f[t]||(f[t]={}),u={state:o,action:r};return i.extend(o,c(e.state)),i.each(e.action||{},function(e,n){r[e]=function(){i.extend(o,c(n.apply(u,arguments))),a(t,e)}}),i.extend({on:i.proxy(d,null,u,t),render:i.proxy(a,null,t)},u)},{state:n,action:f,on:i.proxy(d,null,{state:n,action:f}),render:a})});