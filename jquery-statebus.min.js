!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=function(e,n){return n===undefined&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(n),n}:t(jQuery)}(function(u){var n={},f={},d=u({});function c(e){return e?JSON.parse(JSON.stringify(e)):{}}u.statebus=u.extend(function(t,e){if("string"!=typeof t)throw new TypeError('Expected type of "string", but "'+typeof t+'".');var o=n[t]||(n[t]={}),r=f[t]||(f[t]={}),i={state:o,action:r};return u.extend(o,c(e.state)),u.each(e.action||{},function(e,n){r[e]=function(){u.extend(o,c(n.apply(i,arguments))),d.trigger(t+"."+e)}}),u.extend({on:function(e,n){d.on(t+"."+e,n)}},i)},{state:n,action:f,on:function(e,n){d.on(e,n)}})});