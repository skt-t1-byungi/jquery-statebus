!function(t,n){"object"==typeof module&&module.exports?n(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],n):n(t.jQuery||t.$)}(window||this,function(f){var o={},i={},t={state:o,action:i},c=f({});function l(t){return t&&"object"==typeof t?JSON.parse(JSON.stringify(t)):{}}function s(o,n,t,i,e){e&&i(o.state,null,[]),n&&(t=f.map(t.split?t.split(/\s+/):t,function(t){return n+"."+t})),c.on(t.join?t.join(" "):t,function(t,n,e){i(o.state,n,e)})}f.statebus=f.extend(function(r,t,n){n&&c.off(r);var u=!n&&o[r]?o[r]:o[r]={},e=!n&&i[r]?i[r]:i[r]={},a={state:u,action:e};return f.extend(u,l(t.state)),f.each(t.action||{},function(o,i){e[o]=function(){var t,n=l(u),e=(t=arguments,Array.prototype.slice.call(t));f.extend(u,l(i.apply(a,e))),c.trigger(r+"."+o,[n,e])}}),f.extend({on:f.proxy(s,null,a,r)},a)},t,{on:f.proxy(s,null,t,null)})});