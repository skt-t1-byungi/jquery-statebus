!function(t,e){"object"==typeof module&&module.exports?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(t.jQuery||t.$)}(window||this,function(f){var e={},n={},t={state:e,action:n},a=f({});function c(t){return t&&"object"==typeof t?JSON.parse(JSON.stringify(t)):{}}function p(n,e,t,o,i){i&&o(n.state,n.state,n.action),e&&(t=f.map(t.split(/\s+/),function(t){return e+"."+t}).join(" ")),a.on(t,function(t,e){o(n.state,e,n.action)})}f.statebus=f.extend(function(o,t){if("string"!=typeof o)throw new TypeError('Expected type of "string", but "'+typeof o+'".');var i=e[o]||(e[o]={}),r=n[o]||(n[o]={}),u={state:i,action:r};return f.extend(i,c(t.state)),f.each(t.action||{},function(e,n){r[e]=function(){var t=c(i);f.extend(i,c(n.apply(u,arguments))),a.trigger(o+"."+e,[t])}}),f.extend({on:f.proxy(p,null,u,o)},u)},t,{on:f.proxy(p,null,t,null)})});