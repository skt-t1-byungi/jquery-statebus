!function(t,n){"object"==typeof module&&module.exports?n(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],n):n(t.jQuery||t.$)}(window||this,function(f){var n={},e={},t={state:n,action:e},a=f({});function c(t){return t&&"object"==typeof t?JSON.parse(JSON.stringify(t)):{}}function p(e,n,t,o,i){i&&o(e.state,null,e.action),n&&(t=f.map(t.split(/\s+/),function(t){return n+"."+t}).join(" ")),a.on(t,function(t,n){o(e.state,n,e.action)})}f.statebus=f.extend(function(o,t){if("string"!=typeof o)throw new TypeError('Expected type of "string", but "'+typeof o+'".');a.off(o);var i=n[o]={},r=e[o]={},u={state:i,action:r};return f.extend(i,c(t.state)),f.each(t.action||{},function(n,e){r[n]=function(){var t=c(i);f.extend(i,c(e.apply(u,arguments))),a.trigger(o+"."+n,[t])}}),f.extend({on:f.proxy(p,null,u,o)},u)},t,{on:f.proxy(p,null,t,null)})});