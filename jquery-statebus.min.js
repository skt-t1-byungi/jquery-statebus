!function(t,n){"object"==typeof module&&module.exports?n(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],n):n(t.jQuery||t.$)}(window||this,function(c){var e={},o={},t={state:e,action:o},p=c({});function s(t){return t&&"object"==typeof t?JSON.parse(JSON.stringify(t)):{}}function i(e,t,n,o,i){i&&o(e.state,e.state,e.action),p.on(y(n,t),function(t,n){o(e.state,n,e.action)})}function y(t,n){if(!n)return t;return c.map(t.split(/\s+/),function(t){return n+"."+t}).join(" ")}c.statebus=c.extend(function(u,t){if("string"!=typeof u)throw new TypeError('Expected type of "string", but "'+typeof u+'".');var f=e[u]||(e[u]={}),n=o[u]||(o[u]={}),a={state:f,action:n};return c.extend(f,s(t.state)),c.each(t.action||{},function(i,r){n[i]=function(){var t,n,e,o=s(f);c.extend(f,s(r.apply(a,arguments))),t=i,n=o,e=u,p.trigger(y(t,e),[n])}}),c.extend({on:c.proxy(i,null,a,u)},a)},t,{on:c.proxy(i,null,t,null)})});